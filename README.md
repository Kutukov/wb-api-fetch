
## Настройка проекта

Для работы с wb-api нужно вставить ключ в файл `.env`:

```
WB_API_KEY=<ваш ключ>
```
А также для подключения к БД в файл `.env` нужно  заполнить параметры:
```
DB_DATABASE=<имя базы>

DB_USERNAME=<пользователь>

DB_PASSWORD=<пароль>
```
## Консольные команды

Все команды запускаются из корня проекта:
```bash
php artisan wb:csvImport {table} {--from=} {--to=}
#Берёт данные из API и сохраняет их в CSV (storage/app/raw_data)

php artisan app:csvToMigration {csv} {--table=}
#Создаёт черновую миграцию из CSV файла

php artisan migrate
#Запуск миграций

php artisan wb:fetch {table} {--from=} {--to=}
#Берёт данные из API и добавляет их в базу данных
```

### Аргументы команд

- {table} — имя таблицы из API  
- {--from=} — дата начала выборки (опционально, по умолчанию вчера)  
- {--to=} — дата конца выборки (опционально, по умолчанию сегодня)  
- {--csv=} — путь к CSV-файлу  
---
Всего в моей БД есть доступ к 5 таблицам: 
- incomes - Доходы 
- migrations - Применённые миграции 
- orders - Заказы 
- sales - Продажи 
- stocks - Склады

## Основная структура проекта
```
pp/
├── Console/
│   └── Commands/        # Консольные команды для импорта данных из API
├── Services/
│   └── WbApiService.php # Работа с API
├── Repositories/        # Классы для работы с таблицами БД
├── Models/              # Модели для таблиц БД (incomes, orders, sales, stocks)
database/
├── migrations/          # Файлы миграций для создания таблиц
storage/
├── app/
│   └── raw_data/        # CSV-файлы с выгруженными данными (не коммитятся)
routes/
├── web.php              # Тестовый просмотр данных по API
.env                     # Настройки проекта и подключения к БД
composer.json            # Зависимости проекта
```
